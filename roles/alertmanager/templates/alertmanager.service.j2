[Unit]
Description=Prometheus Alertmanager
Documentation=https://prometheus.io/docs/alerting/latest/alertmanager/
Wants=network-online.target
After=network-online.target
[Service]
User=alertmanager
Group=alertmanager
Type=simple
ExecStart=/usr/local/bin/alertmanager \
    --config.file={{ alertmanager_config_dir }}/alertmanager.yml \
    --storage.path={{ alertmanager_data_dir }} \
    --web.listen-address=:{{ alertmanager_port }} \
    --cluster.listen-address=:{{ alertmanager_cluster_port }} \
    --web.external-url=http://{{ ansible_host }}:{{ alertmanager_port }}
ExecReload=/bin/kill -HUP $MAINPID
SyslogIdentifier=alertmanager
Restart=always
RestartSec=5
[Install]
WantedBy=multi-user.target
